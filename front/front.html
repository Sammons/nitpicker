<head>
  <title>nitpicker</title>
  <script src="//cdnjs.cloudflare.com/ajax/libs/rickshaw/1.4.6/rickshaw.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/rickshaw/1.4.6/rickshaw.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.4.0/jquery.timeago.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <div class="container">
    <h1>nitpicker!</h1>

    {{> hello}}
    <!-- {{> testResults }} -->

    {{> endpointsStats}}

    <!-- {{> nitpickerEvents}} -->
  </div>
  
</body>

<template name="hello">
  <button name="1-hour">Past 1 hour</button>
  <button name="24-hours">Past 24 hours</button>
  <button name="7-days">Past week</button>
  <button name="1-month">Past month</button>

  <p>Showing past {{timeWindow}}.</p>

  <p>Last updated: <time class="timeago" datetime="{{lastUpdated ISO=true}}"></time>.</p>
</template>

<template name="testResults">
<div class="row">
  <h3>Tests Results (real-time)</h3>

  {{#each results}}
    <div>Test "{{testId}}" took {{responseTime}} ms to complete.</div>
  {{/each}}
</div>
</template>

<template name="endpointsStats">
{{#each endpoints}}
  {{> endpointView endpointName=name }}
{{/each}}
</template>

<template name="endpointView">

<div class="row">
  <h3>{{endpointName}}</h3>

  <div class="col-md-3">
    <div class="well">
      <span class="averageResponseTimeValue">{{ averageResponseTime }}</span>
      <p>average response time</p>
    </div>
    <div class="well">
      <span class="averageResponseTimeValue">{{ maxResponseTime }}</span>
      <p>max response time</p>
    </div>
    
    
    <a>Events:</a>

    <ul>
    {{#each getEvents}}
      <li>{{testId}}: {{description}} {{createdDate}}</li>
    {{/each}}
    </ul>
  </div>
  <div class="col-md-9">
    <div class="graph_container">
      <div class="y-axis" id="y-{{ DOMName }}"></div>
      <div class="graph" id="graph-{{ DOMName }}"></div>
    </div>
  </div>
</div>

</template>

<template name="nitpickerEvents">
	<h3>Events</h3>
  {{#each getEvents}}
    <div>{{serviceName}}: issue with "{{testId}}": {{description}} | {{createdDate}} | {{resolved}}</div>
  {{/each}}
</template>